import{b as T,p as V,d as C,q as Y,r as g,s as D,o as a,k as P,v as q,c as r,f as t,e,x as h,y as F,z as B,u as R,a as U,A as z,w as G,t as u,F as w,B as H,g as A,i as K,C as L,D as J,E as O,l as M}from"./lji2BBP2.js";import{_ as Q}from"./vl2EY3RU.js";function W(y,i){const{title:n,titleTemplate:l,...c}=y;return T({title:n,titleTemplate:l,_flatMeta:c},{...i,transform(_){const m=V({..._._flatMeta});return delete _._flatMeta,{..._,meta:m}}})}const X=["href"],Z=["href"],tt=["href"],et=C({__name:"Share",props:{type:{},text:{}},setup(y){Y();const i=g("");return D(()=>{i.value=location.href}),(n,l)=>{const c=F;return a(),P(c,null,{default:q(()=>[n.type==="x"?(a(),r("a",{key:0,class:"button-share",href:`https://twitter.com/share?url=${t(i)}&text=${n.text}`,target:"_blank"},l[0]||(l[0]=[e("object",{class:"button-share__img",type:"image/svg+xml",data:"/logo_x.svg"},null,-1)]),8,X)):n.type==="threads"?(a(),r("a",{key:1,class:"button-share",href:`https://www.threads.net/intent/post?text=${n.text} ${t(i)}`,target:"_blank"},l[1]||(l[1]=[e("object",{class:"button-share__img",type:"image/svg+xml",data:"/logo_threads.svg"},null,-1)]),8,Z)):n.type==="note"?(a(),r("a",{key:2,class:"button-share",href:`https://note.com/intent/post?url=${t(i)}`,target:"_blank",rel:"noopener"},l[2]||(l[2]=[e("object",{class:"button-share__img",type:"image/svg+xml",data:"/logo_note.svg"},null,-1)]),8,tt)):h("",!0)]),_:1})}}}),st=B(et,[["__scopeId","data-v-b70d33d4"]]),ot={class:"page"},at={class:"content"},nt={class:"post-list mt-5"},lt={class:"post-list__info"},rt=["href"],it={class:"post-list__info"},ct=["href"],_t={class:"content"},pt={class:"page-title"},dt={class:"flex-grow-1 text-right"},ut={class:"post-date"},ht={class:"post-date__label"},mt={class:"post-date__label"},ft={class:"post-share"},gt={class:"post-share__buttons mt-2"},yt={class:"content"},bt={class:"post-list mt-5"},vt={class:"post-list__info"},$t=["href"],xt={class:"post-list__info"},kt=["href"],wt=C({__name:"[id]",async setup(y){var $,x;let i,n;const l=["x","threads","note"],c=R(),{$postApi:_}=U(),{params:m,query:b}=Y(),s=g(),p=g(),d=g(),I=Array.isArray(m.id)?m.id[0]:m.id,v=async()=>{try{s.value=await _.show(I,b);const[o,f]=await Promise.all([_.get({filters:`type[contains]blog,publishedAt[less_than]${s.value.publishedAt}`,orders:"-publishedAt",limit:1}),_.get({filters:`type[contains]blog,publishedAt[greater_than]${s.value.publishedAt}`,orders:"publishedAt",limit:1})]);p.value=o.contents[0]??null,d.value=f.contents[0]??null}catch(o){console.error("Fetch error: ",o),L({statusCode:404,statusMessage:"Page not found"})}};return D(async()=>{b.draftKey&&(await v(),await z())}),[i,n]=G(()=>v()),await i,n(),W({title:()=>{var o;return`${(o=s.value)==null?void 0:o.title} | ${c.title}`},description:()=>{var o;return`${(o=s.value)==null?void 0:o.title} | ${c.title}`},ogDescription:()=>{var o;return`${(o=s.value)==null?void 0:o.title} | ${c.title}`},ogTitle:()=>{var o;return`${(o=s.value)==null?void 0:o.title} | ${c.title}`},ogUrl:`/posts/${($=s.value)==null?void 0:$.id}`,ogImage:`https://res.cloudinary.com/plus-one-tech/l_text:Sawarabi%20Gothic_36_bold:${encodeURI(((x=s.value)==null?void 0:x.title)??"Plus one")},co_rgb:568,y_-24,w_512,c_fit/plusone_tech_ogp.png`,ogType:"article"}),(o,f)=>{var k;const N=J,j=Q,E=st;return a(),r("main",ot,[e("section",at,[e("ul",nt,[e("li",lt,[t(d)?(a(),r("a",{key:0,href:`/posts/${t(d).id}`},"次の記事: "+u(t(d).title),9,rt)):h("",!0)]),e("li",it,[t(p)?(a(),r("a",{key:0,href:`/posts/${t(p).id}`},"前の記事: "+u(t(p).title),9,ct)):h("",!0)])])]),e("section",_t,[t(s)?(a(),r(w,{key:0},[e("h1",pt,[H(u(t(s).title),1),e("div",dt,[t(s).category?(a(),P(N,{key:0,name:t(s).category.name,color:t(s).category.color,href:`/posts?${t(O).stringify({category:(k=t(s).category)==null?void 0:k.id})}`},null,8,["name","color","href"])):h("",!0)])]),A(j,{class:"mb-6",content:t(s).content},null,8,["content"]),e("div",ut,[e("div",ht,"公開日: "+u(t(M)(t(s).publishedAt).format("YYYY-MM-DD")),1),e("div",mt,"更新日: "+u(t(M)(t(s).updatedAt).format("YYYY-MM-DD")),1)]),e("div",ft,[f[0]||(f[0]=e("p",{class:"post-share__title"},"この記事をシェア",-1)),e("div",gt,[(a(),r(w,null,K(l,S=>A(E,{type:S,text:t(s).title+"｜"+t(c).title},null,8,["type","text"])),64))])])],64)):h("",!0)]),e("section",yt,[e("ul",bt,[e("li",vt,[t(d)?(a(),r("a",{key:0,href:`/posts/${t(d).id}`},"次の記事: "+u(t(d).title),9,$t)):h("",!0)]),e("li",xt,[t(p)?(a(),r("a",{key:0,href:`/posts/${t(p).id}`},"前の記事: "+u(t(p).title),9,kt)):h("",!0)])])])])}}}),Ct=B(wt,[["__scopeId","data-v-0deae1e3"]]);export{Ct as default};
