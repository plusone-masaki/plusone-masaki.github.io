import{d as w,H as v,o as d,c as P,g as a,v as u,f as e,S as h,I as D,J as p,E as g,P as _,K as E,F as I,i as M,k as L,B as V,t as R,L as T,M as z,N as F,z as G,u as H,a as O,q as j,b as J,r as b,h as K,O as Q,e as $,x as U,Q as W,_ as X}from"./lji2BBP2.js";const Y={class:"pagination"},Z=w({__name:"Pagination",props:{currentPage:{},itemsPerPage:{},total:{},displayPages:{}},setup(k){const s=k,o=v(()=>Math.ceil(s.total/s.itemsPerPage)),i=v(()=>o.value-s.currentPage<=5?Math.max(o.value-s.displayPages,0):s.currentPage<=5?0:s.currentPage-6);return(t,m)=>{const n=F;return d(),P("div",Y,[a(n,{class:p(["pagination__link",{disabled:t.currentPage<=1}]),href:`/posts?${e(g).stringify({...(t._.provides[_]||t.$route).query,page:1})}`},{default:u(()=>[a(e(h),{type:"mdi",path:e(D)},null,8,["path"])]),_:1},8,["class","href"]),a(n,{class:p(["pagination__link",{disabled:t.currentPage<=1}]),href:`/posts?${e(g).stringify({...(t._.provides[_]||t.$route).query,page:t.currentPage-1})}`},{default:u(()=>[a(e(h),{type:"mdi",path:e(E)},null,8,["path"])]),_:1},8,["class","href"]),(d(!0),P(I,null,M(Math.min(e(o),11),r=>(d(),L(n,{class:p(["pagination__link pagination__link--numbers",{disabled:e(i)+r===t.currentPage}]),href:`/posts?${e(g).stringify({...(t._.provides[_]||t.$route).query,page:e(i)+r})}`},{default:u(()=>[V(R(e(i)+r),1)]),_:2},1032,["class","href"]))),256)),a(n,{class:p(["pagination__link",{disabled:t.currentPage>=e(o)}]),href:`/posts?${e(g).stringify({...(t._.provides[_]||t.$route).query,page:t.currentPage+1})}`},{default:u(()=>[a(e(h),{type:"mdi",path:e(T)},null,8,["path"])]),_:1},8,["class","href"]),a(n,{class:p(["pagination__link",{disabled:t.currentPage>=e(o)}]),href:`/posts?${e(g).stringify({...(t._.provides[_]||t.$route).query,page:e(o)})}`},{default:u(()=>[a(e(h),{type:"mdi",path:e(z)},null,8,["path"])]),_:1},8,["class","href"])])}}}),x=G(Z,[["__scopeId","data-v-c12e7b26"]]),ee={class:"page"},te={class:"content"},ae={class:"content"},se={key:0,class:"mb-4"},y="ブログ記事一覧",C=10,oe=w({__name:"index",setup(k){const s=H(),{$postApi:o,$categoryApi:i}=O(),t=j();J({title:y+" | "+s.title,meta:[{name:"og:title",content:y+" | "+s.title},{name:"og:description",content:y+" | "+s.title},{name:"og:image",content:`https://res.cloudinary.com/plus-one-tech/l_text:Sawarabi%20Gothic_36_bold:${encodeURI(y)},co_rgb:568,y_-24,w_512,c_fit/plusone_tech_ogp.png`},{name:"og:type",content:"website"}]});const m=b([]),n=K("categories",()=>[]),r=b(["type[contains]blog"]),q=b(0),N=v(()=>Number(t.query.page)||1),S=v(()=>t.query.category&&n.value.find(l=>l.id===t.query.category));return Q(()=>t.query,async l=>{m.value=[],r.value=["type[contains]blog"],l.category&&r.value.push(`category[equals]${l.category}`);const[c,f]=await Promise.all([o.get({filters:r.value.join(","),limit:C,offset:C*(N.value-1)}),n.value.length?void 0:i.get({limit:100})]);m.value=c.contents,q.value=c.totalCount,f&&(n.value=f.contents)},{deep:!0,immediate:!0}),(l,c)=>{const f=W,A=X,B=x;return d(),P("main",ee,[$("section",te,[c[0]||(c[0]=$("h3",{class:"mb-4"},"カテゴリー",-1)),a(f,{categories:e(n)},null,8,["categories"])]),$("section",ae,[e(S)?(d(),P("h3",se,"カテゴリー： "+R(e(S).name),1)):U("",!0),a(A,{class:"mb-6",items:e(m)},null,8,["items"]),a(B,{"current-page":e(N),"items-per-page":C,total:e(q),"display-pages":11},null,8,["current-page","total"])])])}}});export{oe as default};
